include:
  - local: 'core/stages.yml'

  - local: 'core/setup.yml'
  - local: 'core/semver.yml'
  - local: 'core/lint.yml'
  - local: 'core/build.yml'
  - local: 'core/test.yml'
  - local: 'core/publish.yml'
  - local: 'core/deploy.yml'
  - local: 'core/integration.yml'

  # Gitlab Provided
  - local: 'core/code-quality.yml'
  # - local: 'core/accessibility.yml'

default:
  tags:
   - dind-nosock
  retry:
    max: 2
    when:
    - runner_system_failure
    - stuck_or_timeout_failure

.lint:
  script:
    - 'echo "no lint config defined Add .lint to pipeline to define."'

.build:
  script:
    - 'echo "no build config defined Add .build to pipeline to define."'

.test:
  script:
    - 'echo "no test config defined Add .test to pipeline to define."'

.integration:
  script:
    - 'echo "no integration config defined Add .integration to pipeline to define."'

.publish:
  script:
    - 'echo "no publish config defined Add .publish to pipeline to define."'

.deploy:
  script:
    - 'echo "no deploy config defined Add .deploy to pipeline to define."'

.deploy_stop:
  script:
    - 'echo "no deploy stop config defined Add .deploy_stop to pipeline to define."'

variables:
  RP_TEMPLATE_NAME: 'core'

  ARTIFACT_COMPRESSION_LEVEL: 'default'
  CACHE_COMPRESSION_LEVEL: 'fast'
  FF_USE_FASTZIP: 'true'
  TRANSFER_METER_FREQUENCY: '5s'
  CACHE_REQUEST_TIMEOUT: '20m'

  DIR: src

  RP_GITLAB_RELEASE_PREFIX: '[Release]'
  RP_SEMVER_BUMP_JOBS_DISABLED: 'true'
